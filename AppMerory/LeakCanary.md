# 【三】LeakCanary

### 原理

* 监控生命周期，onDestroy添加RefWatcher检测
* 二次确认断定发生内存泄露
* 分析泄露，找引用链
* 监控组件+分析组件

### 定制

* 预设怀疑点 -> 自动找怀疑点
* 分析泄露链路慢 -> 分析 Retain sized大的对象
* 分析OOM -> 对象裁剪，不全部加载到内存

### 线上监控

#### 监控指标

* 待机内存、重点模块内存、OOM率
* 整体及重点模块GC次数、GC时间
* 增强的LeakCanary自动化内存泄露分析

